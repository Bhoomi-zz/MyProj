(function($){$.fn.fogLoader=function(g){var h={message:'Loading',animated:false,closeOnEscape:true,height:25,maxHeight:false,maxWidth:false,minHeight:15,minWidth:20,position:'center',width:130,textAlign:'center',wrapText:'nowrap',fontSize:'1.2em',fontFamily:null,fontWeight:'normal',borderRadius:null,borderWidth:'1px',style:'message',progressMax:10,progressChar:'.',progressSpell:false,progressDelay:250,progressBarImage:null,progressValue:0};var i=null;var j=null;var k=1;var l='';var m={close:function(){$('.ui-progressbar').remove();clearInterval(l);$(this).dialog('close')},destroy:function(){$('.ui-progressbar').remove();clearInterval(l);$(this).dialog('destroy')},updateProgress:function(v){fillProgressBar(v)}};if(typeof g==='object'||!g){j=$.extend({},h,g)}else{i=g;if(m[i]){return m[i].apply(this,Array.prototype.slice.call(arguments,1))}else{$.error('_method '+i+' does not exist on jQuery.fogLoader')}};function fillProgressBar(v){if(v<=100){$('.ui-progressbar-value').css('width',v+'%');if(v==100){$('.ui-progressbar-value').addClass('ui-corner-all');$('.ui-progressbar-value').css({width:'102%'})}}}$(this).each(function(){var c=j.message;var d='#ui-dialog-title-'+$(this).attr('id');var e;if(j.style=='message'){if(j.animated){if(j.progressSpell){e=j.message.substring(0,1)}else{e=j.message}}else{e=j.message+'&hellip;'}}$(this).dialog({modal:true,resizable:false,closeText:'',draggable:false,closeOnEscape:j.closeOnEscape,height:j.height,width:j.width,maxHeight:j.maxHeight,minHeight:j.minHeight,maxWidth:j.maxWidth,minWidth:j.minWidth,position:j.position,title:e,beforeclose:function(a,b){$('#ui-dialog-title-loader-progressbar').remove();clearInterval(l);$(this).dialog('destroy')}});$('.ui-dialog-titlebar').addClass('ui-state-default').removeClass('ui-widget-header').css({fontSize:j.fontSize,fontWeight:j.fontWeight,whiteSpace:j.wrapText,'border-width':'0px'});if(j.fontFamily!=null){$('.ui-dialog-titlebar').css({fontFamil:j.fontFamily})}$('.ui-dialog-titlebar-close').remove();$('.ui-dialog').css({padding:'0',borderWidth:j.borderWidth});if(j.borderRadius!=null){$('.ui-dialog-titlebar').css({'-moz-border-radius':j.borderRadius,'-webkit-border-radius':j.borderRadius});$('.ui-dialog').css({'-moz-border-radius':j.borderRadius,'-webkit-border-radius':j.borderRadius})};if(j.style=='progressbar'){var f=$('<div />');f.attr('id',d+'-'+j.style);f.css('height',(j.height-5)+'px');f.progressbar({value:j.progressValue});$('.ui-dialog-titlebar').hide();$(this).css({height:'auto',padding:1,overflow:'hidden'});$(this).append(f);$('.ui-progressbar-value').css('margin','-2px');if(!$.support.htmlSerialize&&j.progressBarImage==null){$('.ui-progressbar-value').css('height',(j.height+5)+'px')}if(j.progressBarImage!=null){$('.ui-progressbar-value').css({backgroundImage:'url('+j.progressBarImage+')'});$('.ui-progressbar-value').removeClass('ui-widget-header');f.removeClass('ui-widget-content');$('.ui-dialog').removeClass('ui-widget-content')}else{$('.ui-dialog .ui-widget-content').css('border-width','0px')}fillProgressBar(j.progressValue)}else{$(this).hide()}if(j.animated&&j.style!='progressbar'){l=setInterval(function(){var a=$(d).html();if(a==null){clearInterval(l)}else{if(a.length<(c.length+(j.progressMax-c.length))){if(j.progressSpell&&j.animated){if(k<c.length){a+=c.substring(k,k+1)}else{a+=j.progressChar}k++}else{a+=j.progressChar}}else{k=1;a=j.progressSpell?j.message.substring(0,1):c}$(d).html(a)}},j.progressDelay)};$('.ui-widget-overlay').css('position','fixed')})}})(jQuery);