if (!jQuery.jsonp)
{
	// jquery.jsonp 1.0.4 (c) 2009 Julian Aubourg | MIT License
	// http://code.google.com/p/jquery-jsonp/
	(function($){var x=function(o){return o!==undefined&&o!==null;},H=$("head"),Z={},K={callback:"C",url:location.href};$.jsonp=function(d){d=$.extend({},K,d);if(x(d.beforeSend)){var t=0;d.abort=function(){t=1;};if(d.beforeSend(d,d)===false||t)return d;}
	var _="",y="success",n="error",u=x(d.url)?d.url:_,p=x(d.data)?d.data:_,s=(typeof p)=="string",k=function(f){setTimeout(f,1);},S,P,i,j,U;p=s?p:$.param(p);x(d.callbackParameter)&&(p+=(p==_?_:"&")+escape(d.callbackParameter)+"=?");!d.cache&&!d.pageCache&&(p+=[(p==_?_:"&"),"_xx",(new Date()).getTime(),"=",1].join(_));S=u.split("?");if(p!=_){P=p.split("?");j=S.length-1;j&&(S[j]+="&"+P.shift());S=S.concat(P);}
	i=S.length-2;i&&(S[i]+=d.callback+S.pop());U=S.join("?");if(d.pageCache&&x(Z[U])){k(function(){if(x(Z[U].e)){x(d.error)&&d.error(d,n);x(d.complete)&&d.complete(d,n);}else{var v=Z[U].s;x(d.dataFilter)&&(v=d.dataFilter(v));x(d.success)&&d.success(v,y);x(d.complete)&&d.complete(d,y);}});return d;}
	var f=$("<iframe />");H.append(f);var F=f[0],W=F.contentWindow||F.contentDocument,D=W.document;if(!x(D)){D=W;W=D.getParentNode();}
	var w,e=function(_,m){d.pageCache&&!x(m)&&(Z[U]={e:1});w();m=x(m)?m:n;x(d.error)&&d.error(d,m);x(d.complete)&&d.complete(d,m);},t=0,C=d.callback,E=C=="E"?"X":"E";D.open();W[C]=function(v){t=1;d.pageCache&&(Z[U]={s:v});k(function(){w();x(d.dataFilter)&&(v=d.dataFilter(v));x(d.success)&&d.success(v,y);x(d.complete)&&d.complete(d,y);});};W[E]=function(s){(!s||s=="complete")&&!t++&&k(e);};w=function(){W[E]=undefined;W[C]=undefined;try{delete W[E];}catch(_){}
	try{delete W[C];}catch(_){}
	D.open()
	D.write(_);D.close();f.remove();}
	k(function(){D.write(['<html><head><script src="',U,'" onload="',E,'()" onreadystatechange="',E,'(this.readyState)"></script></head><body onload="',E,'()"></body></html>'].join(_));D.close();});d.timeout>0&&setTimeout(function(){!t&&e(_,"timeout");},d.timeout);d.abort=w;return d;}
	$.jsonp.setup=function(o){$.extend(K,o);};})(jQuery);
}

if (!jQuery().flash)
{
	// jQuery SWFObject v1.1.1 MIT/GPL @jon_neal
	// http://jquery.thewikies.com/swfobject
	(function(f,h,i){function k(a,c){var b=(a[0]||0)-(c[0]||0);return b>0||!b&&a.length>0&&k(a.slice(1),c.slice(1))}function l(a){if(typeof a!=g)return a;var c=[],b="";for(var d in a){b=typeof a[d]==g?l(a[d]):[d,m?encodeURI(a[d]):a[d]].join("=");c.push(b)}return c.join("&")}function n(a){var c=[];for(var b in a)a[b]&&c.push([b,'="',a[b],'"'].join(""));return c.join(" ")}function o(a){var c=[];for(var b in a)c.push(['<param name="',b,'" value="',l(a[b]),'" />'].join(""));return c.join("")}var g="object",m=true;try{var j=i.description||function(){return(new i("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}()}catch(p){j="Unavailable"}var e=j.match(/\d+/g)||[0];f[h]={available:e[0]>0,activeX:i&&!i.name,version:{original:j,array:e,string:e.join("."),major:parseInt(e[0],10)||0,minor:parseInt(e[1],10)||0,release:parseInt(e[2],10)||0},hasVersion:function(a){a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0];return k(e,a)},encodeParams:true,expressInstall:"expressInstall.swf",expressInstallIsActive:false,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&!a.hasVersionFail)return false;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=true;if(typeof a.hasVersionFail=="function")if(!a.hasVersionFail.apply(a))return false;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(Math.random()*999999999),width:a.width||320,height:a.height||180,style:a.style||""};m=typeof a.useEncode!=="undefined"?a.useEncode:this.encodeParams;a.movie=a.swf;a.wmode=a.wmode||"opaque";delete a.fallback;delete a.hasVersion;delete a.hasVersionFail;delete a.height;delete a.id;delete a.swf;delete a.useEncode;delete a.width;var c=document.createElement("div");c.innerHTML=["<object ",n(attrs),">",o(a),"</object>"].join("");return c.firstChild}};f.fn[h]=function(a){var c=this.find(g).andSelf().filter(g);/string|object/.test(typeof a)&&this.each(function(){var b=f(this),d;a=typeof a==g?a:{swf:a};a.fallback=this;if(d=f[h].create(a)){b.children().remove();b.html(d)}});typeof a=="function"&&c.each(function(){var b=this;b.jsInteractionTimeoutMs=b.jsInteractionTimeoutMs||0;if(b.jsInteractionTimeoutMs<660)b.clientWidth||b.clientHeight?a.call(b):setTimeout(function(){f(b)[h](a)},b.jsInteractionTimeoutMs+66)});return c}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject);
}

if (typeof Yox == "undefined")
Yox={addStylesheet:function(a,b){var d=a.createElement("link");d.setAttribute("rel","Stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",b);a.getElementsByTagName("head")[0].appendChild(d)},compare:function(a,b){function d(g){var h=0;for(var i in g)i!=null&&h++;return h}if(typeof a!=typeof b)return false;else if(typeof a=="function")return a==b;if(d(a)!=d(b))return false;for(var e in a){var c=a[e],f=b[e];if(typeof c!=typeof f)return false;if(c&&c.length&&c[0]!==undefined&&c[0].tagName){if(!f||
f.length!=c.length||!f[0].tagName||f[0].tagName!=c[0].tagName)return false}else if(typeof c=="function"||typeof c=="object"){c=Yox.compare(c,f);if(!c)return c}else if(c!=f)return false}return true},dataSources:[],fitImageSize:function(a,b,d,e){var c={width:a.width,height:a.height};if(!d&&a.width>b.width||d&&a.width!=b.width){c.height=Math.round(b.width/a.width*a.height);c.width=b.width}if(!e&&c.height>b.height){c.width=Math.round(b.height/c.height*c.width);c.height=b.height}else if(e&&c.height<b.height){c.height=
b.height;c.width=Math.round(b.height/a.height*a.width)}return c},flashVideoPlayers:{jwplayer:function(a,b,d,e,c){a={swf:a||"/jwplayer/player.swf",flashVars:{file:b,image:d,stretching:"fill",title:e,backcolor:"000000",frontcolor:"FFFFFF"}};$.extend(a.flashVars,c);return a}},getDataSourceName:function(a){for(dataSourceIndex in Yox.Regex.data)if(a.match(Yox.Regex.data[dataSourceIndex]))return dataSourceIndex;return null},getPath:function(a){for(var b=document.getElementsByTagName("script"),d=0;d<b.length;d++){var e=
b[d].src.match(a);if(e)return e[1]}return null},getTopWindow:function(){var a=window;if(window.top)a=window.top;else for(;a.parent;)a=a.parent;return a},getUrlData:function(a){var b=a.match(Yox.Regex.url);if(!b)return null;a={path:b[1],anchor:b[3]};if(b[2]){var d={};b=b[2].split("&");for(var e=0;e<b.length;e++){var c=b[e].split("=");if(c.length==2)d[c[0]]=c[1]}a.queryFields=d}return a},hex2rgba:function(a,b){a=parseInt(a.replace("#","0x"),16);return"rgba("+((a&16711680)>>16)+", "+((a&65280)>>8)+", "+
(a&255)+", "+(typeof b!="undefined"?b:"1")+")"},queryToJson:function(a){a=a.split("&");var b={};jQuery.each(a,function(){var d=this.split("=");b[d[0]]=d[1]});return b},loadDataSource:function(a,b,d){var e;if(a.dataUrl)(e=Yox.getDataSourceName(a.dataUrl))&&$.extend(a,{dataSource:dataSourceIndex});a.dataSource&&!Yox.dataSources[e]?$.ajax({url:a.dataFolder+a.dataSource+".js",async:false,dataType:"script",success:function(c){eval(c);eval("Yox.dataSources['"+a.dataSource+"'] = new yox_"+a.dataSource+"();");
b(d)},error:function(c,f,g){console.log(c,f,g)}}):b(d)},Regex:{data:{picasa:/http:\/\/(www.)?picasaweb\.google\..*/,flickr:/http:\/\/(www.)?flickr.com/,smugmug:/http:\/\/.*\.smugmug.com/},flash:/^(.*\.(swf))(\?[^\?]+)?/i,flashvideo:/^(.*\.(flv|f4v|f4p|f4a|f4b|aac))(\?[^\?]+)?/i,image:/^[^\?#]+\.(?:jpg|jpeg|gif|png)$/i,url:/^([^#\?]*)?(?:\?([^\?#]*))?(?:#([A-Za-z]{1}[A-Za-z\d-_\:\.]+))?$/,video:{youtube:/.*youtube.com\/watch.*(?:v=[^&]+).*/i,vimeo:/vimeo.com\/\d+/i,hulu:/hulu.com\/watch\//i,viddler:/viddler.com\//i,
flickr:/.*flickr.com\/.*/i,myspace:/.*vids.myspace.com\/.*/i,qik:/qik.com/i,revision3:/revision3.com/i,dailymotion:/dailymotion.com/i,"5min":/.*5min\.com\/Video/i}},Sprites:function(a,b,d){this.spritesImage=(new Image).src=b;var e=0;jQuery.each(a,function(c,f){f.top=e;e+=f.height});this.getSprite=function(c,f,g){return jQuery("<img/>",{src:d,alt:f,title:g,css:{width:a[c].width,height:a[c].height,"background-image":"url("+b+")","background-repeat":"no-repeat","background-position":this.getBackgroundPosition(c,
f)}})};this.getBackgroundPosition=function(c,f){return"-"+jQuery.inArray(f,a[c].sprites)*(a[c].width||0)+"px -"+a[c].top+"px"}},Support:{rgba:function(){if(!("result"in arguments.callee)){var a=document.createElement("div"),b=false;try{a.style.color="rgba(0, 0, 0, 0.5)";b=/^rgba/.test(a.style.color)}catch(d){}arguments.callee.result=b}return arguments.callee.result}},urlDataToPath:function(a){var b=a.path||"";if(a.queryFields&&a.queryFields.length>0){b+="?";for(field in a.queryFields)b+=field+"="+
a.queryFields[field]+"&";b=b.substring(0,b.length-1)}if(a.anchor)b+="#"+a.anchor;return b}};

(function(g){function m(c,b){function j(a){var d=jQuery("<a>",{href:a.link}),e=jQuery("<img>",{src:a.thumbnailSrc,alt:a.media.alt,title:a.media.title});a.data&&d.data("yoxthumbs",a.data);a.thumbnailDimensions&&e.css({width:a.thumbnailDimensions.width,height:a.thumbnailDimensions.height});e.appendTo(d);return d}var h=this;c.data("yoxview")&&c.data("yoxview");var f=jQuery,k=c[0].tagName=="A";b.images&&jQuery.each(b.images,function(a,d){c.append(j(d))});this.thumbnails=[];var n=k?c:c.find("a:has(img)"),
o=0;f.each(n,function(a,d){var e=f(d),l=true;if(b.enableOnlyMedia)if(!d.href.match(Yox.Regex.image)){var i=false;for(dataProvider in Yox.Regex.data)if(d.href.match(Yox.Regex.data[dataProvider])){i=true;break}if(!i){i=false;for(videoProvider in Yox.Regex.video)if(d.href.match(Yox.Regex.video[videoProvider])){i=true;break}i||(l=false)}}if(l){e.data("yoxthumbs",f.extend({imageIndex:o++},e.data("yoxthumbs")));h.thumbnails.push(e)}});if(b.thumbsOpacity){this.thumbnails.css("opacity",b.thumbsOpacity);c.delegate("a:has(img)",
"mouseenter.yoxthumbs",function(a){if(h.currentSelectedIndex===undefined||f(a.currentTarget).data("yoxthumbs").imageIndex!=h.currentSelectedIndex)f(a.currentTarget).stop().animate({opacity:1},b.thumbsOpacityFadeTime)}).delegate("a:has(img)","mouseout.yoxthumbs",function(a){if(h.currentSelectedIndex===undefined||f(a.currentTarget).data("yoxthumbs").imageIndex!=h.currentSelectedIndex)f(a.currentTarget).stop().animate({opacity:b.thumbsOpacity},b.thumbsOpacityFadeTime)})}if(b.onClick)k?c.bind("click.yoxthumbs",
function(a){b.onClick(a);return false}):c.delegate("a:has(img)","click.yoxthumbs",function(a){if(!f(a.currentTarget).data("yoxthumbs"))return true;b.onClick(a);return false});this.select=function(a){if(this.currentSelectedIndex===undefined||this.currentSelectedIndex!=a){var d=this.thumbnails.eq(a),e=c.data("yoxslide");e&&e.show(d);if(this.currentSelectedIndex!==undefined){e=this.thumbnails.eq(this.currentSelectedIndex);e.removeClass(b.selectedThumbnailClassName);b.thumbsOpacity&&e.animate({opacity:b.thumbsOpacity},
b.thumbsOpacityFadeTime)}d.addClass(b.selectedThumbnailClassName);b.thumbsOpacity&&d.animate({opacity:1},b.thumbsOpacityFadeTime);this.currentSelectedIndex=a}};this.unload=function(a){f.each(this.thumbnails,function(d,e){f(e).removeData("yoxthumbs");a&&f(e).removeData(a)});c.undelegate("a:has(img)","click.yoxthumbs");k&&c.unbind(".yoxthumbs")}}g.fn.yoxthumbs=function(c){if(this.length==0)return this;if(typeof c!="string"){var b=g.extend({target:null,selectedThumbnailClassName:"selected",thumbsOpacityFadeTime:300,
thumbsOpacity:undefined,prevBtn:undefined,nextBtn:undefined,onClick:undefined,images:undefined,enableOnlyMedia:false},c),j=g(this);j.data("yoxthumbs",new m(j,b))}else if(b=g(this).data("yoxthumbs"))if(g.isFunction(b[c]))b[c].apply(b,Array.prototype.slice.call(arguments,1));else return b[c];return this}})(jQuery);

/*!
 * jquery.yoxview
 * jQuery media viewer
 * http://yoxigen.com/yoxview
 *
 * Copyright (c) 2010 Yossi Kolesnicov
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Date: 11th September, 2010
 * Version : 2.09
 */ 
var yoxviewApi;
(function(x){var F;x.yoxviewUnload=function(){if(yoxviewApi){yoxviewApi.unload();yoxviewApi=null}};x(Yox.getTopWindow()).unload(function(){x.yoxviewUnload()});x.fn.extend({yoxview:function($){if(this.length==0)return this;var U=this;F||(F=typeof _yoxviewPath!="undefined"?_yoxviewPath:Yox.getPath(/(.*)jquery.yoxview.*/i));this.loadSkin=function(s,G){var w=s.skin;if(!yoxviewSkins[w]){var H=F+"skins/"+w+"/yoxview."+w;x.ajax({url:H+".js",dataType:"script",success:function(na){eval(na);x.extend(s,yoxviewSkins[w].options);
yoxviewSkins[w].css!==false&&Yox.addStylesheet(top.document,H+".css");U.loadLanguage(s,G)},error:function(){alert("Error loading skin file "+H+".js")}})}};this.loadLanguage=function(s,G){var w=s.lang;if(yoxviewLanguages[w])Yox.loadDataSource(s,G,U);else{yoxviewLanguages[w]={};x.ajax({url:F+"lang/"+w+".js",async:false,dataType:"json",success:function(H){yoxviewLanguages[w]=H;Yox.loadDataSource(s,G,U)}})}};var za={autoHideInfo:true,autoPlay:false,backgroundColor:"#000000",backgroundOpacity:0.8,buttonsFadeTime:300,
cacheBuffer:5,cacheImagesInBackground:true,controlsInitialFadeTime:1500,controlsInitialDisplayTime:1E3,dataFolder:F+"data/",defaultDimensions:{flash:{width:720,height:560},iframe:{width:1024}},flashVideoPlayer:"jwplayer",imagesFolder:F+"images/",infoBackColor:"#000000",infoBackOpacity:0.5,isRTL:false,lang:"en",langFolder:F+"lang/",loopPlay:true,parentElement:x(top.document.getElementsByTagName("body")[0]),playDelay:3E3,popupMargin:20,popupResizeTime:600,renderButtons:true,renderMenu:true,showBarsOnOpen:true,
showButtonsOnOpen:true,titleAttribute:"title",titleDisplayDuration:2E3},N=x.extend(true,za,$);(N.skin?this.loadSkin:this.loadLanguage).apply(this,[N,function(s){if(yoxviewApi)yoxviewApi.AddViews(s,N);else yoxviewApi=new YoxView(s,N)}]);return this}})})(jQuery);var yoxviewLanguages=[],yoxviewSkins=[];
function YoxView(x,F){function $(a){a=e(a).data("yoxview");if(!y||Aa!=a.viewIndex){if(!a.cacheVars)a.cacheVars={cachedImagesCount:0,cacheDirectionForward:true,cacheBufferLastIndex:null,currentCacheImg:0};y=a.images;l=y.length;Aa=a.viewIndex;var c=false;if(a.options&&!Yox.compare(b,a.options)){b=a.options;c=true}else if(!a.options&&!Yox.compare(b,Ba)){b=Ba;c=true}else if(V&&l==1||j&&!V&&l>0)c=true;if(c){if(j){t.remove();O=W=aa=P=oa=V=j=undefined;z=0;g.infoButtons={}}Ca()}m=a.cacheVars}}function U(a,
c){var d=c.queryFields&&(c.queryFields.width||c.queryFields.height)?{width:parseInt(c.queryFields.width),height:parseInt(c.queryFields.height)}:b.defaultDimensions[a];if(isNaN(d.width))d.width=null;if(isNaN(d.height))d.height=null;if(c.queryFields){c.queryFields.width=undefined;c.queryFields.height=undefined}return d}function za(a,c,d){a=e(a);a.data("yoxview",{viewIndex:c,cacheVars:{cachedImagesCount:0,cacheDirectionForward:true,cacheBufferLastIndex:null,currentCacheImg:0}});d.allowedImageUrls=[Yox.Regex.image];
if(d.allowedUrls)d.allowedImageUrls=d.allowedImageUrls.concat(d.allowedUrls);if(!Yox.compare(b,d))a.data("yoxview").options=d;d.isSingleLink=a[0].tagName=="A";var f=[],i=0;(d.isSingleLink?a:a.find("a:has(img)")).each(function(h,I){var r=e(I),n;n={};var L=r.attr("href"),Q=r.children("img:first");n={};for(supportedType in Oa){var ba=Oa[supportedType](r,L,Q,d);if(ba){e.extend(ba,{contentType:supportedType,elementId:$a++});n.media=ba;break}}if(n.media){n.thumbnailImg=Q;n=n}else n=null;if(n!=null){f.push(n);
if(d.isSingleLink)r.data("yoxview").imageIndex=i;else r.data("yoxview",{imageIndex:i});i++}});if(d.images)f=f.concat(d.images);if(d.dataSource)Yox.dataSources[d.dataSource].getImagesData(d,function(h){f=f.concat(h.images);a.data("yoxview").images=f;var I=h.isGroup?[e.extend(h,{media:{title:h.title+" ("+h.images.length+" images)",alt:h.title}})]:h.images;N(a,d.isSingleLink?null:I,!h.createGroups?null:function(r){var n=e(r.currentTarget).data("yoxview"),L=e(r.currentTarget);r=L.data("yoxthumbs");if(n.imagesAreSet)g.openGallery(n.viewIndex);
else{L.css("cursor","wait");var Q=e.extend({},b);if(Q.dataSourceOptions)e.extend(Q.dataSourceOptions,r);else Q.dataSourceOptions=r;Yox.dataSources[b.dataSource].getImagesData(Q,function(ba){n.images=ba.images;n.imagesAreSet=true;L.css("cursor","");g.openGallery(n.viewIndex)})}});h.createGroups?e.each(a.yoxthumbs("thumbnails"),function(r,n){n.data("yoxview",{viewIndex:R.length});R.push(n)}):e.each(a.yoxthumbs("thumbnails"),function(r,n){var L=i+r;f[L].thumbnailImg=n.children("img").eq(0);n.data("yoxview",
{imageIndex:L})});if(!g.firstViewWithImages&&h.images.length>0){g.firstViewWithImages=a;d.cacheImagesInBackground&&g.startCache()}});else{a.data("yoxview").images=f;N(a)}}function N(a,c,d){var f=function(i){var h=e(i.currentTarget).data("yoxview");if(!h||h.imageIndex===null)return true;else{i.preventDefault();g.openGallery(e(i.liveFired||i.currentTarget).data("yoxview").viewIndex,h.imageIndex)}};if(a[0].tagName=="A")a.bind("click.yoxview",f);else c?a.yoxthumbs({images:c,enableOnlyMedia:false,onClick:d||
function(i){i.preventDefault();b.thumbnailsOptions&&b.thumbnailsOptions.onClick?b.thumbnailsOptions.onClick(e(i.currentTarget).data("yoxview").imageIndex,e(i.currentTarget),e(i.liveFired).data("yoxview").viewIndex):g.openGallery(e(i.liveFired||i.currentTarget).data("yoxview").viewIndex,e(i.currentTarget).data("yoxview").imageIndex);return false}}):a.delegate("a:has(img)","click.yoxview",f)}function s(a){var c=e(R[Aa]);C=c[0].tagName=="A"?c:y[z].thumbnailImg;if(!C||C.length==0)C=y[0].thumbnailImg;
if(C){a&&P&&P.attr("src",C.attr("src"));if(ab&&!X&&window.name)X=e(top.document).find("[name='"+window.name+"']").offset();Da=C.offset();u={width:C.width(),height:C.height(),top:Da.top-e(ca).scrollTop()+(X?X.top:0),left:Da.left+(X?X.left:0)}}}function G(a){pa.css("background-position",J.getBackgroundPosition("notifications",a));pa.stop().fadeIn(b.buttonsFadeTime,function(){e(this).delay(500).fadeOut(b.buttonsFadeTime)})}function w(a){e(a).stop().animate({opacity:0.5},b.buttonsFadeTime)}function H(a,
c,d){var f=e("<a>",{href:"#",click:function(){return g.clickBtn(g[c],d)}});e("<span>"+a+"</span>").css("opacity","0").appendTo(f);f.append(J.getSprite("icons",c));return f}function na(a,c,d){var f=new Image;f.src=b.imagesFolder+c+".png";f=e("<a>",{css:{background:"url("+f.src+") no-repeat "+c+" center",opacity:"0",outline:"0"},className:"yoxview_ctlBtn",href:"#"});f.css(c,"0");if(d)f.css("cursor","default");else{f.click(function(){this.blur();return g.clickBtn(a,true)});b.buttonsFadeTime!=0&&f.hover(function(){g.isOpen&&
e(this).stop().animate({opacity:0.6},b.buttonsFadeTime)},function(){e(this).stop().animate({opacity:0},b.buttonsFadeTime)})}return f}function bb(){var a=typeof b.popupMargin=="number"?[String(b.popupMargin)]:b.popupMargin.split(" ",4);k.top=parseInt(a[0]);if(a.length==1)k.bottom=k.right=k.left=k.top;else if(a.length==2){k.bottom=k.top;k.right=k.left=parseInt(a[1])}else if(a.length==3){k.bottom=parseInt(a[2]);k.right=k.left=parseInt(a[1])}else if(a.length==4){k.right=parseInt(a[1]);k.bottom=parseInt(a[2]);
k.left=parseInt(a[3])}k.totalHeight=k.top+k.bottom;k.totalWidth=k.left+k.right}function Ca(){bb();D=Pa();o=yoxviewLanguages[b.lang];var a=b.skin?yoxviewSkins[b.skin]:null;j=e("<div>",{id:"yoxview",click:function(h){h.stopPropagation()}});t=e("<div>",{id:"yoxview_popupWrap",click:function(h){h.preventDefault();g.clickBtn(g.close,true)}});b.skin&&t.attr("className","yoxview_"+b.skin);if(b.backgroundOpacity===0)t.css("background","none");else Yox.Support.rgba()&&t.css("background-color",Yox.hex2rgba(b.backgroundColor,
b.backgroundOpacity));t.appendTo(b.parentElement).append(j);W=e("<div>",{className:"yoxview_imgPanel",css:{"z-index":"2"}});O=e("<div>",{className:"yoxview_imgPanel",css:{"z-index":"1",display:"none"}});P=e("<img />",{className:"yoxview_fadeImg",css:{display:"block",width:"100%",height:"100%"}});aa=e("<img />",{className:"yoxview_fadeImg",css:{display:"block",width:"100%",height:"100%"}});W.data("yoxviewPanel",{image:P}).append(P).appendTo(j);O.data("yoxviewPanel",{image:aa});O.append(aa).appendTo(j);
var c=l==1;if(c&&!y[0].media.title)b.renderInfo=false;if(b.renderMenu!==false){var d=e("<div>",{className:"yoxview_popupBarPanel yoxview_top"});b.autoHideMenu!==false&&d.hover(function(){g.isOpen&&Qa()},function(){g.isOpen&&Ea()});A=e("<div>",{id:"yoxview_menuPanel"});if(Yox.Support.rgba()&&b.menuBackgroundColor)A.css("background",Yox.hex2rgba(b.menuBackgroundColor,b.menuBackgroundOpacity||0.8));var f=H(o.Help,"help",false);g.infoButtons.playBtn=H(o.Slideshow,"play",false);da=g.infoButtons.playBtn.children("span");
A.append(H(o.Close,"close",true),f,g.infoButtons.playBtn);if(c){g.infoButtons.playBtn.css("display","none");f.css("display","none");A.css({width:58})}A.find("a:last-child").attr("class","last");d.append(A).appendTo(j);A.delegate("a","mouseenter",function(){e(this).stop().animate({top:"8px"},"fast").find("span").stop().animate({opacity:1},"fast")}).delegate("a","mouseleave",function(){e(this).stop().animate({top:"0"},"fast").find("span").stop().animate({opacity:0},"fast")})}if(b.renderButtons!==false&&
(!c||!e.support.opacity)){V=na(g.prev,b.isRTL?"right":"left",c);oa=na(g.next,b.isRTL?"left":"right",c);j.append(V,oa);S=c&&!e.support.opacity?e():j.find(".yoxview_ctlBtn")}else S=e();ea=e("<div>",{id:"yoxview_ajaxLoader",className:"yoxview_notification",css:{display:"none"}});ea.append(e("<img>",{src:b.imagesFolder+"popup_ajax_loader.gif",alt:o.Loading,css:{width:32,height:32,"background-image":"url("+b.imagesFolder+"sprites.png)","background-position":J.getBackgroundPosition("notifications","empty")}})).appendTo(j);
if(!b.disableNotifications){pa=e("<img>",{className:"yoxview_notification"});j.append(pa)}T=e("<div>",{id:"yoxview_helpPanel",href:"#",title:o.CloseHelp,css:{background:"url("+b.imagesFolder+"help_panel.png) no-repeat center top",direction:o.Direction,opacity:"0"},click:function(){return g.clickBtn(g.help,false)}});d=document.createElement("h1");d.innerHTML=o.Help.toUpperCase();f=document.createElement("p");f.innerHTML=o.HelpText;var i=document.createElement("span");i.id="yoxview_closeHelp";i.innerHTML=
o.CloseHelp;T.append(d).append(f).append(i).appendTo(j);if(b.renderInfo!==false){p=e("<div>",{id:"yoxview_infoPanel",click:function(h){h.stopPropagation()}});if(b.infoBackOpacity===0){p.css("background","none");K=p}else if(Yox.Support.rgba()){K=p;p.css("background-color",Yox.hex2rgba(b.infoBackColor,b.infoBackOpacity))}else{p.append(e("<div>",{id:"yoxview_infoPanelBack",css:{background:b.infoBackColor,opacity:b.infoBackOpacity}}));K=e("<div>",{id:"yoxview_infoPanelContent"})}qa=e("<span>",{id:"yoxview_count"});
Y=e("<div>",{id:"yoxview_infoText"});if(c){Y.css("margin-left","10px");qa.css("display","none")}K.append(qa);if(b.renderInfoPin!==false){Fa=J.getSprite("icons",b.autoHideInfo?"pin":"unpin");Ra=e("<a>",{className:"yoxviewInfoLink",href:"#",title:b.autoHideInfo?o.PinInfo:o.UnpinInfo,css:{display:"inline"},click:function(h){h.preventDefault();b.autoHideInfo=!b.autoHideInfo;Fa.css("background-position",J.getBackgroundPosition("icons",b.autoHideInfo?"pin":"unpin"));this.title=b.autoHideInfo?o.PinInfo:
o.UnpinInfo}});Ra.append(Fa).appendTo(K)}if(a&&a.infoButtons){a=a.infoButtons(b,o,J,t,j);if(b.infoButtons)e.extend(b.infoButtons,a);else b.infoButtons=a}if(b.infoButtons){e.extend(g.infoButtons,b.infoButtons);for(infoButton in b.infoButtons)b.infoButtons[infoButton].attr("className","yoxviewInfoLink").css("display","block").appendTo(K)}if(b.linkToOriginalContext!==false){fa=e("<a>",{className:"yoxviewInfoLink",target:"_blank",title:o.OriginalContext});fa.append(J.getSprite("icons","link")).appendTo(K)}K.append(Y);
Yox.Support.rgba()||p.append(K);p.appendTo(b.renderInfoExternally?t:j);if(!b.renderInfoExternally){M=e("<div>",{className:"yoxview_popupBarPanel yoxview_bottom"});M.hover(function(){g.isOpen&&!ga&&b.autoHideInfo!==false&&ra()},function(){g.isOpen&&!ga&&b.autoHideInfo!==false&&ha()});p.wrap(M);M=p.parent()}}Yox.Support.rgba()||(cb=e("<div>",{css:{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",background:b.backgroundColor,"z-index":"1",opacity:b.backgroundOpacity}}).appendTo(t))}function Ga(){m.cachedImagesCount++;
if(m.cachedImagesCount==l)m.cacheComplete=true;else Sa()}function Sa(){if(!b.cacheBuffer||m.currentCacheImg!=m.cacheBufferLastIndex)ia(m.currentCacheImg+(m.cacheDirectionForward?1:-1))}function Ha(){if(b.cacheBuffer){m.cacheBufferLastIndex=m.cacheDirectionForward?z+b.cacheBuffer:z-b.cacheBuffer;if(m.cacheBufferLastIndex<0)m.cacheBufferLastIndex+=l;else if(m.cacheBufferLastIndex>=l)m.cacheBufferLastIndex-=l}}function ia(a){if(!m.cacheComplete){if(a==l)a=0;else if(a<0)a+=l;var c=y[a].media;m.currentCacheImg=
a;if(c&&!c.loaded)if(c.contentType==="image"||!c.contentType)Ta.src=c.src;else Ua(c,function(){Ga()});else Sa()}}function Va(){Ia=true;clearTimeout(Ja);ea.stop();Ja=setTimeout(function(){ea.css("opacity","0.6").fadeIn(b.buttonsFadeTime)},b.buttonsFadeTime)}function Ka(a,c,d,f,i){j.stop().animate({width:a,height:c,top:d,left:f},b.popupResizeTime,i)}function sa(){if(l!=1){q=true;if(da)da.text(o.Pause);else g.infoButtons.playBtn&&g.infoButtons.playBtn.attr("title",o.Pause);g.infoButtons.playBtn&&g.infoButtons.playBtn.find("img").css("background-position",
J.getBackgroundPosition("icons","pause"));if(z<l-1)La=setTimeout(function(){g.next(true)},b.playDelay);else{if(b.loopPlay)La=setTimeout(function(){g.select(0,null)},b.playDelay);else E();b.onEnd&&setTimeout(b.onEnd,b.playDelay)}}}function E(){clearTimeout(La);q=false;if(da)da.text(o.Play);else g.infoButtons.playBtn&&g.infoButtons.playBtn.attr("title",o.Play);g.infoButtons.playBtn&&g.infoButtons.playBtn.find("img").css("background-position",J.getBackgroundPosition("icons","play"))}function Pa(){var a=
e(ca).width(),c=e(ca).height();return{height:c,width:a,usableHeight:c-k.totalHeight,usableWidth:a-k.totalWidth}}function Wa(a){a=a.width&&a.height?Yox.fitImageSize(a,{width:D.usableWidth,height:D.usableHeight}):{width:a.width?Math.min(a.width,D.usableWidth):D.usableWidth,height:a.height?Math.min(a.height,D.usableHeight):D.usableHeight};a.top=k.top+Math.round((D.usableHeight-a.height)/2);a.left=k.left+Math.round((D.usableWidth-a.width)/2);return a}function ra(a){clearTimeout(ja);var c=Y.outerHeight();
if(c<Xa)c=Xa;p.stop().animate({height:c},500,function(){a&&a()})}function ha(a){clearTimeout(ja);p.stop().animate({height:0},500,function(){a&&a()})}function Ea(a){if(A){clearTimeout(Ma);A.stop().animate({top:db},500,function(){a&&a()})}}function Qa(a){if(A){clearTimeout(Ma);A.stop().animate({top:0},500,function(){a&&a()})}}function Ya(){ka=v;v=ta?O:W;ta=!ta}function ua(a){var c=a.contentType==="image"||!a.contentType;c&&ga&&M&&M.css("display","block");clearTimeout(ja);Ya();var d=v.data("yoxviewPanel");
B.width=a.width;B.height=a.height;B.padding=a.padding;if(p){var f=a.title||"";if(a.description)f+=f!=""?"<div id='yoxview_infoTextDescription'>"+a.description+"</div>":a.description;Y.html(f);l>1&&qa.html(z+1+"/"+l);if(fa)g.currentImage.link?fa.attr("href",g.currentImage.link).css("display","inline"):fa.css("display","none")}f=Wa(a);if(c){currentImageElement=ta?P:aa;currentImageElement.attr({src:a.src,title:a.title,alt:a.alt});d.image=currentImageElement;if(!d.isImage&&d.element){d.element.css("display",
"none");d.image.css("display","block");d.isImage=true}if(!la){b.renderButtons&&S.css({height:"100%",width:"50%",top:"0"});ga=false;la=true}}else{if(d.element&&d.elementId!=a.elementId){d.element.remove();d.element=undefined}if(!d.element)if(a.html){d.element=e("<div>",{className:eb});j.append(d.element)}else{j.append(a.element);d.element=a.element}a.html&&d.element.html(a.html);v=d.element;if(la){if(M){b.autoHideInfo!==false&&ha();M.css("display","none");ga=true}b.renderButtons&&S.css({width:va.width,
height:va.height});la=false}b.renderButtons&&S.css({top:(f.height-va.height)/2});if(d.isImage===undefined||d.isImage){d.element.css("display","block");d.image.css("display","none");d.isImage=false}}wa?v.animate({width:f.width,height:f.height},b.popupResizeTime):v.css({width:f.width,height:f.height});if(Ia){Ia=false;clearTimeout(Ja);ea.stop().fadeOut(b.buttonsFadeTime)}Z=true;Ka(f.width,f.height,f.top,f.left,function(){if(wa){g.isOpen=true;if(b.controlsInitialDisplayTime>0){b.showButtonsOnOpen&&S.animate({opacity:0.5},
b.controlsInitialFadeTime,function(){b.buttonsFadeTime!=0&&e(this).delay(b.controlsInitialDisplayTime).animate({opacity:0},b.controlsInitialFadeTime)});if(b.showBarsOnOpen){Qa(function(){if(b.autoHideMenu!==false)Ma=setTimeout(function(){Ea()},b.controlsInitialDisplayTime)});p&&ra(function(){if(b.autoHideInfo!==false)ja=setTimeout(function(){ha()},b.controlsInitialDisplayTime)})}}b.autoPlay&&g.play();b.onOpen&&b.onOpen();if(xa){xa();xa=undefined}wa=false}if(B.padding){var i=j.width(),h=j.height();
if(B.padding){i-=B.padding.horizontal;h-=B.padding.vertical}v.css({width:i+"px",height:h+"px"})}Z=false});v.css({"z-index":"2",opacity:1});ka&&ka.css("z-index","1");v.fadeIn(b.popupResizeTime,function(){ka&&ka.css("display","none");p&&ra(function(){if(b.autoHideInfo!==false)ja=setTimeout(function(){ha()},b.titleDisplayDuration)});if(l>1){if(b.cacheImagesInBackground&&!m.cacheComplete)ia(z+(m.cacheDirectionForward?1:-1));q&&sa()}})}function fb(a,c,d,f,i){jQuery.jsonp({url:gb[a]||"http://oohembed.com/oohembed/",
data:jQuery.extend({url:c,format:"json"},d),dataType:"jsonp",callbackParameter:"callback",success:function(h){var I={title:h.title,width:h.width,height:h.height,type:h.type};if(h.type==="video")I.html=h.html.replace(/<embed /,'<embed wmode="transparent" ').replace(/<param/,'<param name="wmode" value="transparent"><param').replace(/width=\"[\d]+\"/ig,'width="100%"').replace(/height=\"[\d]+\"/ig,'height="100%"');else h.type==="photo"&&jQuery.extend(I,{src:h.url,alt:h.title,type:"image"});f(I)},error:function(h,
I){i&&i(h,I)}})}function Za(a){try{if(!a)throw"Error: Media is unavailable.";if(a.contentType==="image"||!a.contentType){if(e.support.opacity)Na.src="";Na.src=a.src}else!a.loaded&&a.contentType=="ooembed"?Ua(a,function(d){ua(d)},function(d){ya("Error getting data from:<br /><span class='errorUrl'>"+d.data.url+"</span>")}):ua(g.currentImage.media)}catch(c){ya(c)}}function Ua(a,c,d){a.contentType=="ooembed"&&fb(a.provider,a.url,b.videoSize,function(f){e.extend(a,f,{loaded:true});c&&c(a)},d)}function ya(a){ua({html:"<span class='yoxview_error'>"+
a+"</span>",width:500,height:300,type:"error",title:""})}this.infoButtons={};this.isOpen=false;var g=this,e=jQuery,ea,m={},Ta=new Image,qa,S,$a=0,z=0,o={},B={},Aa=0,ab=window!=window.parent,Ba=F,ga=false,hb={wmode:"transparent",width:"100%",height:"100%",allowfullscreen:"true",allowscriptaccess:"true",hasVersion:9},wa=true,X,T,ja,Ma,P,aa,y,l=0,p,K,fa,Xa=30,M,Ra,Fa,Y,ta=false,la=true,q=false,Z=false,Ja,Ia=false,va={width:100,height:100},eb="yoxview_mediaPanel",gb={vimeo:"http://vimeo.com/api/oembed.json",
myspace:"http://vids.myspace.com/index.cfm?fuseaction=oembed"},db=-42,A,oa,pa,xa,b=Ba,W,O,da,j,cb,k={},La,ca=Yox.getTopWindow(),t,V,ma=false,Na=new Image,C,Da,u,R=[],D,ib={40:"DOWN",35:"END",13:"ENTER",36:"HOME",37:"LEFT",39:"RIGHT",32:"SPACE",38:"UP",72:"h",27:"ESCAPE"},jb={RIGHT:b.isRTL?"prev":"next",DOWN:"next",UP:"prev",LEFT:b.isRTL?"next":"prev",ENTER:"play",HOME:"first",END:"last",SPACE:"next",h:"help",ESCAPE:"close"},J=new Yox.Sprites({notifications:{width:59,height:59,sprites:["empty","playRTL",
"play","pause","last","first"]},icons:{width:18,height:18,sprites:["close","help","playpause","link","pin","unpin","play","pause","right","left"]},menu:{height:42,sprites:["back"]}},b.imagesFolder+"sprites.png",b.imagesFolder+"empty.gif");this.AddViews=function(a,c){var d=this.firstViewWithImages!=undefined;jQuery.each(a,function(){za(this,R.length,c);R.push(this);if(!g.firstViewWithImages){var f=e(this).data("yoxview").images;if(f&&f.length!=0)g.firstViewWithImages=this}});if(!d&&this.firstViewWithImages){$(this.firstViewWithImages);
Ca();if(c.cacheImagesInBackground&&l!=0){Ha();ia(0)}d=true}};this.SetImages=function(a){l=a.length};var Oa={image:function(a,c,d,f){for(var i=null,h=0;h<f.allowedImageUrls.length&&!i;h++)if(c.match(f.allowedImageUrls[h]))i={src:a.attr("href"),title:d.attr(f.titleAttribute),alt:d.attr("alt")};return i},flash:function(a,c,d,f){var i=null;var h=(a=c.match(Yox.Regex.flash))?null:c.match(Yox.Regex.flashvideo);if(a||h){c=Yox.getUrlData(c);i=e("<div>",{className:"yoxview_element",html:"<div class='yoxview_error'>Please install the latest version of the <a href='http://www.adobe.com/go/getflashplayer' target='_blank'>Flash player</a> to view content</div>"});
h=h?Yox.flashVideoPlayers[f.flashVideoPlayer](f.flashVideoPlayerPath,c.path,c.queryFields&&c.queryFields.image?c.queryFields.image:d.attr("src"),d.attr(f.titleAttribute)):c.queryFields||{};if(a)h.swf=c.path;e.extend(h,hb);i.flash(h);i={element:i,title:d.attr(f.titleAttribute)};e.extend(i,U("flash",c))}return i},ooembed:function(a,c){var d=null;for(videoProvider in Yox.Regex.video)if(c.match(Yox.Regex.video[videoProvider])){d={provider:videoProvider,url:c};break}return d},inline:function(a,c,d,f){if(!f.allowInternalLinks)return null;
a=null;if((c=Yox.getUrlData(c))&&c.anchor){c=e("#"+c.anchor);if(c.length!=0){d={width:parseInt(c.css("width")),height:parseInt(c.css("height"))};c.css({position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block"});a={type:"inlineElement",element:c,title:c.attr("title")};f={horizontal:parseInt(c.css("padding-right"))+parseInt(c.css("padding-left")),vertical:parseInt(c.css("padding-top"))+parseInt(c.css("padding-bottom"))};d.width=isNaN(d.width)?null:d.width+f.horizontal;d.height=isNaN(d.height)?
null:d.height+f.vertical;e.extend(a,d);if(f.horizontal!=0||f.vertical!=0)a.padding=f;c.remove()}}return a},iframe:function(a,c,d){var f=null;if((a=a.attr("target"))&&a=="yoxview")if((c=Yox.getUrlData(c))&&c.path){a=U("iframe",c);if(c.queryFields){c.queryFields.width=undefined;c.queryFields.height=undefined}f={element:e("<iframe>",{src:Yox.urlDataToPath(c),className:"yoxview_element"}),title:d.attr("title"),frameborder:"0"};e.extend(f,a)}return f}};this.openGallery=function(a,c,d){if(typeof a=="function"){d=
a;a=c=0}else if(typeof c=="function"){d=c;c=0}a=a||0;c=c||0;e(document).delegate("*","keydown.yoxview",function(f){if(g&&g.isOpen){var i=g[jb[ib[f.keyCode]]];if(i){f.preventDefault();i.apply(g)}}});$(R[a]);!j&&l!=0&&Ca();this.selectImage(c);t.stop().css({opacity:0,display:"block"}).animate({opacity:1},"slow",function(){t.css("opacity","")});b.cacheImagesInBackground&&ia(c);if(d)xa=d;return false};this.selectImage=function(a){g.currentImage=y[a];z=a;s(true);C.blur();W.css({"z-index":"1",width:u.width,
height:u.height});O.css({display:"none","z-index":"2"});wa=true;j.css({width:u.width,height:u.height,top:u.top,left:u.left});this.select(a)};this.refresh=function(){(ma=q)&&E();q||Va();Za(g.currentImage.media);ma&&sa()};this.select=function(a,c){if(typeof c==="number")c=undefined;if(!Z){if(a<0){a=l-1;if(b.onEnd){b.onEnd();return}}else if(a==l){a=0;if(b.onEnd){b.onEnd();return}}if(!q&&c){var d=c;d.css("opacity")==0&&d.stop().animate({opacity:0},b.buttonsFadeTime,w(d))}g.currentImage=y[a];z=a;q||Va();
Za(g.currentImage.media);Ha();b.onSelect&&b.onSelect(a,y[a])}};this.prev=function(a){m.cacheDirectionForward=false;this.select(z-1,V);q&&a!==true&&E()};this.next=function(a){m.cacheDirectionForward=true;this.select(z+1,oa);q&&a!==true&&E()};this.first=function(){b.disableNotifications||G("first");this.select(0);q&&E()};this.last=function(){b.disableNotifications||G("last");this.select(l-1);q&&E()};this.play=function(){if(l!=1){m.cacheDirectionForward=true;if(q){b.disableNotifications||G("pause");
E()}else{b.disableNotifications||G("play");sa()}}};this.close=function(){this.closeHelp();s(false);Ka(u.width,u.height,u.top,u.left,function(){g.isOpen=false});Ea();p&&ha(function(){Y.html("")});v.animate({width:u.width,height:u.height},b.popupResizeTime,function(){v.css("opacity",1)});t.stop().fadeOut(1E3);q&&E();Ya();b.onClose&&b.onClose();e(document).undelegate("*","keydown.yoxview");Z=false};this.help=function(){if(this.isOpen)T.css("display")=="none"?T.css("display","block").stop().animate({opacity:0.8},
b.buttonsFadeTime):this.closeHelp()};this.closeHelp=function(){T.css("display")!="none"&&T.stop().animate({opacity:0},b.buttonsFadeTime,function(){T.css("display","none")})};this.clickBtn=function(a,c){c&&q&&E();a.call(this);return false};this.AddViews(x,b);ca.onresize=function(){D=Pa();g.isOpen&&g.resize()};e(Ta).load(function(){e.extend(y[m.currentCacheImg].media,{width:this.width,height:this.height,loaded:true});Ga()}).error(function(){Ga()});this.startCache=function(){$(this.firstViewWithImages);
Ha();ia(0)};var v=O,ka=W;this.resize=function(){if(q){ma=true;E()}var a=Wa(B);v.css({width:"100%",height:"100%"});Z=true;la||S.css({top:Math.round((a.height-va.height)/2)});Ka(a.width,a.height,a.top,a.left,function(){var c=j.width(),d=j.height();if(B.padding){c-=B.padding.horizontal;d-=B.padding.vertical}v.css({width:c+"px",height:d+"px"});Z=false;p&&ra();if(ma){sa();ma=false}})};e(Na).load(function(){this.width==0?ya("Image error"):ua(e.extend({},g.currentImage.media,{width:this.width,height:this.height}))}).error(function(){ya("Image not found:<br /><span class='errorUrl'>"+
this.src+"</span>")});this.unload=function(){jQuery.each(R,function(a,c){e(c).undelegate("a","click.yoxview").removeData("yoxview").yoxthumbs("unload","yoxview")});e(document).undelegate("*","keydown.yoxview");e(ca).unbind(".yoxview");if(j){t.remove();j=undefined}}};
